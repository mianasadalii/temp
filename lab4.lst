C51 COMPILER V9.60.0.0   LAB4                                                              11/27/2025 10:03:23 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LAB4
OBJECT MODULE PLACED IN .\Objects\lab4.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE lab4.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\lab4
                    -.lst) TABS(2) OBJECT(.\Objects\lab4.obj)

line level    source

   1          #include <regx51.h>
   2          
   3          // --- Input Definitions (Buttons) ---
   4          // Button names are used for P3.0 through P3.3, assuming active-high logic
   5          sbit Button1 = P3^0; // Controls P2.0 (L1) and P2.2 (L3)
   6          sbit Button2 = P3^1; // Controls P2.1 (L2) and P2.3 (L4)
   7          sbit Button3 = P3^2; // Controls P2.4 (L5) and P2.6 (L7)
   8          sbit Button4 = P3^3; // Controls P2.5 (L6) and P2.7 (L8)
   9          
  10          // --- Delay Function ---
  11          // This provides a simple blocking delay for basic polling/debounce
  12          void Delay (unsigned int k)
  13          {
  14   1          unsigned int i, j;
  15   1          for (i = 0; i < k; i++)
  16   1          {
  17   2              for (j = 0; j < 110; j++); // Fine-tuned for typical 8051 clocks
  18   2          }
  19   1      }
  20          
  21          // --- Main Program ---
  22          void main()
  23          {
  24   1          // P2 is used as the Output Port for all 8 LEDs (L1-L8)
  25   1          P2 = 0x00;
  26   1      
  27   1          // P3 is configured for input, with internal pull-ups enabled (default for 8051)
  28   1          // We explicitly set P3 to 0xFF to ensure all bits are high initially for input
  29   1          P3 = 0xFF;
  30   1      
  31   1          while(1)
  32   1          {
  33   2              // ----------------------------------------------------
  34   2              // If Button 1 (P3.0) is pressed (High) -> L1 (P2.0) and L3 (P2.2) ON
  35   2              // Output value: 0b00000101 = 0x05
  36   2              // ----------------------------------------------------
  37   2              if(Button1 == 1)
  38   2              {
  39   3                  P2 = 0x05;
  40   3              }
  41   2      
  42   2              // ----------------------------------------------------
  43   2              // If Button 2 (P3.1) is pressed (High) -> L2 (P2.1) and L4 (P2.3) ON
  44   2              // Output value: 0b00001010 = 0x0A
  45   2              // ----------------------------------------------------
  46   2              else if(Button2 == 1)
  47   2              {
  48   3                  P2 = 0x0A;
  49   3              }
  50   2      
  51   2              // ----------------------------------------------------
  52   2              // If Button 3 (P3.2) is pressed (High) -> L5 (P2.4) and L7 (P2.6) ON
  53   2              // Output value: 0b01010000 = 0x50
  54   2              // ----------------------------------------------------
C51 COMPILER V9.60.0.0   LAB4                                                              11/27/2025 10:03:23 PAGE 2   

  55   2              else if(Button3 == 1)
  56   2              {
  57   3                  P2 = 0x50;
  58   3              }
  59   2      
  60   2              // ----------------------------------------------------
  61   2              // If Button 4 (P3.3) is pressed (High) -> L6 (P2.5) and L8 (P2.7) ON
  62   2              // Output value: 0b10100000 = 0xA0
  63   2              // ----------------------------------------------------
  64   2              else if(Button4 == 1)
  65   2              {
  66   3                  P2 = 0xA0;
  67   3              }
  68   2      
  69   2              // ----------------------------------------------------
  70   2              // Default State: If no button is pressed -> ALL LEDs OFF
  71   2              // ----------------------------------------------------
  72   2              else
  73   2              {
  74   3                  P2 = 0x00;
  75   3              }
  76   2      
  77   2              // Short delay for stable polling (acts as a minimal debounce time)
  78   2              Delay(5);
  79   2          }
  80   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     82    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
